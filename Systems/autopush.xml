<?xml version="1.0"?>

<!--

AUTOPUSH
Pushback dialog.

Copyright (c) 2018 Michael Danilov <mike.d.ft402 -eh- gmail.com>
Original code (c) FlightGear
Distribute under the terms of GPLv2.

-->

<PropertyList>

	<name>autopush</name>
	<layout>vbox</layout>

	<group>
		<layout>hbox</layout>
		
		<text>
			<label>Pushback</label>
		</text>
		
		<empty>
			<stretch>true</stretch>
		</empty>
		
        <button>
            <halign>right</halign>
            <pref-width>20</pref-width>
            <pref-height>20</pref-height>
            <legend>X</legend>
            <key>Esc</key>
            <binding>
                <command>dialog-close</command>
            </binding>
        </button>
	</group>

	<hrule/>

	<group>
		<stretch>true</stretch>
		<layout>vbox</layout>
		<halign>center</halign>
		<valign>top</valign>
		
		<checkbox>
			<halign>left</halign>
			<label>Connect</label>
			<property>/sim/model/pushback/enabled</property>
			<binding>
				<command>dialog-apply</command>
			</binding>
			<binding>
				<command>nasal</command>
				<script>autopush.toggle();</script>
			</binding>
		</checkbox>
		
		<hrule/>

		<group>
			<layout>table</layout>
			
			<text>
				<row>0</row>
				<col>0</col>
				<label>Speed:   </label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&lt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/target-speed-km_h</property>
					<min>-15</min>
					<max>15</max>
					<step>-1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<slider>
				<row>0</row>
				<col>2</col>
				<min>-15</min>
				<max>15</max>
				<property>/sim/model/pushback/target-speed-km_h</property>
				<live>true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</slider>
			
			<button>
				<row>0</row>
				<col>3</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&gt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/target-speed-km_h</property>
					<min>-15</min>
					<max>15</max>
					<step>1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<button>
				<row>0</row>
				<col>4</col>
				<pref-width>50</pref-width>
				<pref-height>25</pref-height>
				<legend>Stop</legend>
				<binding>
					<command>property-assign</command>
					<property>/sim/model/pushback/target-speed-km_h</property>
					<value>0</value>
				</binding>
			</button>
			
			<text>
				<row>0</row>
				<col>5</col>
				<pref-width>16</pref-width>
				<property>/sim/model/pushback/target-speed-km_h</property>
				<format>%3.0f</format>
				<live>true</live>
			</text>
			
			<text>
				<row>0</row>
				<col>6</col>
				<label>km/h</label>
			</text>
		</group>

		<hrule/>

		<group>
			<layout>table</layout>
			
			<text>
				<row>0</row>
				<col>0</col>
				<halign>left</halign>
				<label>Distance:</label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&lt;&lt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/tow-distance-m</property>
					<min>-100</min>
					<max>100</max>
					<step>-10</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<button>
				<row>0</row>
				<col>2</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&lt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/tow-distance-m</property>
					<min>-100</min>
					<max>100</max>
					<step>-1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<slider>
				<row>0</row>
				<col>3</col>
				<min>-100</min>
				<max>100</max>
				<property>/sim/model/pushback/driver/tow-distance-m</property>
				<live>true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</slider>
			
			<button>
				<row>0</row>
				<col>4</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&gt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/tow-distance-m</property>
					<min>-100</min>
					<max>100</max>
					<step>1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<button>
				<row>0</row>
				<col>5</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&gt;&gt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/tow-distance-m</property>
					<min>-100</min>
					<max>100</max>
					<step>10</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<text>
				<row>0</row>
				<col>6</col>
				<pref-width>16</pref-width>
				<property>/sim/model/pushback/driver/tow-distance-m</property>
				<format>%4.0f</format>
				<live>true</live>
			</text>
			
			<text>
				<row>0</row>
				<col>7</col>
				<label>m    </label>
			</text>
		</group>

		<group>
			<layout>table</layout>
			
			<text>
				<row>0</row>
				<col>0</col>
				<halign>left</halign>
				<label>Facing:  </label>
			</text>
			
			<button>
				<row>0</row>
				<col>1</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&lt;&lt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/face-heading-deg</property>
					<min>0</min>
					<max>360</max>
					<step>-10</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<button>
				<row>0</row>
				<col>2</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&lt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/face-heading-deg</property>
					<min>0</min>
					<max>360</max>
					<step>-1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<slider>
				<row>0</row>
				<col>3</col>
				<min>0</min>
				<max>360</max>
				<property>/sim/model/pushback/driver/face-heading-deg</property>
				<live>true</live>
				<binding>
					<command>dialog-apply</command>
				</binding>
			</slider>
			
			<button>
				<row>0</row>
				<col>4</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&gt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/face-heading-deg</property>
					<min>0</min>
					<max>360</max>
					<step>1</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<button>
				<row>0</row>
				<col>5</col>
				<pref-width>25</pref-width>
				<pref-height>25</pref-height>
				<legend>&gt;&gt;</legend>
				<binding>
					<command>property-adjust</command>
					<property>/sim/model/pushback/driver/face-heading-deg</property>
					<min>0</min>
					<max>360</max>
					<step>10</step>
					<wrap>false</wrap>
				</binding>
			</button>
			
			<text>
				<row>0</row>
				<col>6</col>
				<pref-width>16</pref-width>
				<property>/sim/model/pushback/driver/face-heading-deg</property>
				<format>%3.0f</format>
				<live>true</live>
			</text>
			
			<text>
				<row>0</row>
				<col>7</col>
				<label>     </label>
			</text>
		</group>

		<group>
			<layout>hbox</layout>
			
			<button>
				<legend>Start</legend>
				<binding>
					<command>nasal</command>
					<script>autopush_driver.start();</script>
				</binding>
			</button>
			
			<button>
				<legend>Stop</legend>
				<binding>
					<command>nasal</command>
					<script>autopush_driver.stop();</script>
				</binding>
			</button>
		</group>

	</group>

</PropertyList>
