<?xml version="1.0"?>
<PropertyList>

 <name>pushback</name>
 <layout>vbox</layout>


<!-- Uncomment for default FG pushback.
-->
 <nasal>
  <open>
   var pushback_position = aircraft.door.new("sim/model/pushback", 10.0);
   pushback_position.setpos(pushback_position.getpos());
   props.globals.getNode("/sim/model/pushback/enabled", 1 ).setBoolValue(1);
   props.globals.initNode("/sim/model/pushback/target-speed-fps", 0.0  );
  </open>
  <close>
   pushback_position.setpos(0);
   setprop("/sim/model/pushback/enabled", 0 );
   setprop("/sim/model/pushback/target-speed-fps", 0 );
   setprop("/sim/model/pushback/force", 0);
  </close>
 </nasal>

 <group>
  <layout>hbox</layout>
  <text>
   <label>Pushback</label>
  </text>
  <empty>
   <stretch>true</stretch>
  </empty>
  <button>
   <legend/>
   <key>Esc</key>
   <pref-width>16</pref-width>
   <pref-height>16</pref-height>
   <border>2</border>
   <binding>
    <command>dialog-close</command>
   </binding>
  </button>
 </group>

 <hrule/>

 <group>
  <stretch>true</stretch>
  <layout>vbox</layout>
  <halign>center</halign>
  <valign>top</valign>

  <checkbox>
   <halign>left</halign>
   <label>Connect</label>
<!-- Uncomment for Tu-144 pushback.
   <property>/sim/model/pushback/enabled</property>
   <binding><command>dialog-apply</command></binding>
-->
<!-- Uncomment for default FG pushback.
-->
   <binding>
    <command>nasal</command>
    <script>pushback_position.toggle();</script>
   </binding>
  </checkbox>

<!-- Uncomment for Tu-144 pushback.
  <group>
   <layout>hbox</layout>
   <text>
    <label>Speed:</label>
   </text>
   <slider>
    <row>0</row>
    <col>2</col>
    <min>-15</min>
    <max>15</max>
    <property>/sim/model/pushback/target-speed-km_h</property>
    <live>true</live>
    <binding>
     <command>dialog-apply</command>
    </binding>
   </slider>
   <text>
    <pref-width>16</pref-width>
    <property>/sim/model/pushback/target-speed-km_h</property>
    <format>%3.0f</format>
    <live>true</live>
   </text>
   <text>
    <label> km/h</label>
   </text>
  </group>
-->

<!-- Uncomment for default FG pushback.
-->
  <group>
   <layout>hbox</layout>
   <text>
    <label>Speed:</label>
   </text>
   <slider>
    <row>0</row>
    <col>2</col>
    <min>-25</min>
    <max>25</max>
    <property>/sim/model/pushback/target-speed-fps</property>
    <live>true</live>
    <binding>
     <command>dialog-apply</command>
    </binding>
   </slider>
   <text>
    <pref-width>16</pref-width>
    <property>/sim/model/pushback/target-speed-fps</property>
    <format>%3.0f</format>
    <live>true</live>
   </text>
   <text>
    <label> fps</label>
   </text>
  </group>

  <hrule/>

  <group>
   <layout>hbox</layout>
   <text>
    <label>Distance:</label>
   </text>
   <slider>
    <row>0</row>
    <col>2</col>
    <min>-100</min>
    <max>100</max>
    <property>/nasal/pushback_driver/tow-distance-m</property>
    <binding>
     <command>dialog-apply</command>
    </binding>
   </slider>
   <text>
    <pref-width>16</pref-width>
    <property>/nasal/pushback_driver/tow-distance-m</property>
    <format>%4.0f</format>
    <live>true</live>
   </text>
   <text>
    <label> m</label>
   </text>
  </group>

  <group>
   <layout>hbox</layout>
   <text>
    <label>Facing:</label>
   </text>
   <slider>
    <row>0</row>
    <col>2</col>
    <min>0</min>
    <max>360</max>
    <property>/nasal/pushback_driver/face-heading-deg</property>
    <binding>
     <command>dialog-apply</command>
    </binding>
   </slider>
   <text>
    <pref-width>16</pref-width>
    <property>/nasal/pushback_driver/face-heading-deg</property>
    <format>%3.0f</format>
    <live>true</live>
   </text>
  </group>

  <group>
   <layout>hbox</layout>
   <button>
    <legend>Tow / push back</legend>
    <binding>
     <command>nasal</command>
     <script>
      pushback_driver.start();
     </script>
    </binding>
   </button>
   <button>
    <legend>Stop</legend>
    <binding>
     <command>nasal</command>
     <script>
      pushback_driver.stop();
     </script>
    </binding>
   </button>
  </group>

  </group>

</PropertyList>
